<map version="0.9.0">
<!-- To view this file, download free mind mapping software FreeMind from http://freemind.sourceforge.net -->
<node CREATED="1339482456384" ID="ID_1550051524" MODIFIED="1339482527584" TEXT="Task Cancellation">
<node CREATED="1339482656391" FOLDED="true" ID="ID_878394129" MODIFIED="1340139244315" POSITION="left" TEXT="reasons to cancel">
<node CREATED="1339482662838" ID="ID_421838504" MODIFIED="1339482680812" TEXT="user requested"/>
<node CREATED="1339482681334" ID="ID_158226461" MODIFIED="1339482691421" TEXT="me-limted activiteis"/>
<node CREATED="1339482691901" FOLDED="true" ID="ID_957102232" MODIFIED="1340139244311" TEXT="application events">
<node CREATED="1339482704481" ID="ID_360237998" MODIFIED="1339482812437" TEXT="an application searches a problem space by decomposing it so that different tasks search different regions of the problem space, when one task finds a solution all other tasks that are still searching are cancelled"/>
</node>
<node CREATED="1339482818217" ID="ID_1342526507" MODIFIED="1339482827810" TEXT="errors"/>
<node CREATED="1339482831503" FOLDED="true" ID="ID_1613390251" MODIFIED="1340139244312" TEXT="shutdown">
<node CREATED="1339482835457" ID="ID_546776575" MODIFIED="1339482858538" TEXT="when an application or service is shudown something must be done about work that is currently being processed"/>
</node>
</node>
<node CREATED="1339482908367" ID="ID_509351637" MODIFIED="1339482917272" POSITION="right" TEXT="stoppng threads">
<node CREATED="1340139232823" ID="ID_1745515760" MODIFIED="1340139236755" TEXT="application">
<node CREATED="1340139236758" ID="ID_1507351409" MODIFIED="1340139242668" TEXT="create">
<node CREATED="1340139250276" ID="ID_1308688576" MODIFIED="1340139262928" TEXT="services">
<node CREATED="1340139262931" ID="ID_1600754391" MODIFIED="1340139475332" TEXT="that own">
<node CREATED="1340139475336" ID="ID_1365724189" MODIFIED="1340139479118" TEXT="threads">
<node CREATED="1340139479121" ID="ID_79035943" MODIFIED="1340139545925" TEXT="which need to be shutdown when the application terminates gracefully"/>
</node>
</node>
<node CREATED="1340139304971" ID="ID_324081607" MODIFIED="1340139314572" TEXT="that live longer than creator"/>
<node CREATED="1340144609532" ID="ID_173439462" MODIFIED="1340144633990" TEXT="shutdown by">
<node CREATED="1340139775895" ID="ID_414345704" MODIFIED="1340139789482" TEXT="lifecycle methods">
<node CREATED="1340139789485" ID="ID_1439101627" MODIFIED="1340139796962" TEXT="for">
<node CREATED="1340139796964" ID="ID_403011930" MODIFIED="1340139803679" TEXT="service shutdown"/>
<node CREATED="1340139804716" ID="ID_372959441" MODIFIED="1340139811164" TEXT="owned threads shutdown"/>
</node>
<node CREATED="1340139829056" ID="ID_1234889717" MODIFIED="1340139844790" TEXT="e.g. ExecutorService">
<node CREATED="1340139844792" ID="ID_850556862" MODIFIED="1340139848977" TEXT="shutdown"/>
<node CREATED="1340139849435" ID="ID_1898436289" MODIFIED="1340139852906" TEXT="shutdownNow">
<node CREATED="1340147385688" ID="ID_1102777966" MODIFIED="1340147389001" TEXT="limitations">
<node CREATED="1340147449919" ID="ID_558139903" MODIFIED="1340147483486" TEXT="no way to find out which tasks started but did not complete"/>
</node>
<node CREATED="1340147401014" ID="ID_1210044711" MODIFIED="1340147413553" TEXT="method">
<node CREATED="1340147414008" ID="ID_1379053324" MODIFIED="1340147424831" TEXT="attempts to cancel tasks currently in progress"/>
<node CREATED="1340147425403" ID="ID_1144037799" MODIFIED="1340147447371" TEXT="retruns a list of tasks that were submitted but never started"/>
</node>
</node>
</node>
<node CREATED="1340139870062" ID="ID_1396005131" MODIFIED="1340139892428" TEXT="whenever a thread-owmomg service has a lifetime longer than the method that created it"/>
<node CREATED="1340144645120" ID="ID_1098952291" MODIFIED="1340144650625" TEXT="encapsulated by ">
<node CREATED="1340144650628" ID="ID_1099585080" MODIFIED="1340144675559" TEXT="complex programs">
<node CREATED="1340144676883" ID="ID_861966964" MODIFIED="1340144684736" TEXT="stop()">
<node CREATED="1340144684738" ID="ID_863238556" MODIFIED="1340144689541" TEXT="wraps">
<node CREATED="1340144700766" ID="ID_1023194000" MODIFIED="1340144711131" TEXT="ExecutorService.shutdown()"/>
<node CREATED="1340144689544" ID="ID_1995227781" MODIFIED="1340144700451" TEXT="ExecutorService.awaitTermination()"/>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1340144786984" ID="ID_1793037356" MODIFIED="1340144795449" TEXT="poison pills ">
<node CREATED="1340144795451" ID="ID_1865498020" MODIFIED="1340144798594" TEXT="definition">
<node CREATED="1340144798596" ID="ID_1256369355" MODIFIED="1340144816162" TEXT="a recognisable object placed on the queue that means &quot;when you get this stop&quot;"/>
</node>
<node CREATED="1340144835490" ID="ID_1799077558" MODIFIED="1340144839515" TEXT="considerations">
<node CREATED="1340144841387" ID="ID_1040199905" MODIFIED="1340144850506" TEXT="for FIFO q&apos;s">
<node CREATED="1340144850508" ID="ID_209770494" MODIFIED="1340144884179" TEXT="ensure consumers finish the work on their queue before shutting down"/>
</node>
<node CREATED="1340144897425" ID="ID_1699106589" MODIFIED="1340144984875" TEXT="producers should not submit any work after putting a poison pill on the queue"/>
<node CREATED="1340145499554" ID="ID_1724351524" MODIFIED="1340145503171" TEXT="work only when">
<node CREATED="1340145318734" ID="ID_1905076418" MODIFIED="1340145491463" TEXT="the number of producers and consumers is known">
<node CREATED="1340145356558" ID="ID_805089100" MODIFIED="1340145417595" TEXT="extending for N producers">
<node CREATED="1340145389320" ID="ID_293006743" MODIFIED="1340145408398" TEXT="consumer only stops when it has receved N pills"/>
</node>
<node CREATED="1340145418411" ID="ID_1053210830" MODIFIED="1340145450705" TEXT="extending for N consumers">
<node CREATED="1340145450708" ID="ID_202955527" MODIFIED="1340145470952" TEXT="each producer places N consumer pills on the queue"/>
</node>
</node>
<node CREATED="1340145492045" ID="ID_915372595" MODIFIED="1340145498504" TEXT="the queue is unbounded"/>
</node>
</node>
<node CREATED="1340144988111" ID="ID_1796388376" MODIFIED="1340144991774" TEXT="method ">
<node CREATED="1340144992269" ID="ID_953676384" MODIFIED="1340145002548" TEXT="catch interupted exception">
<node CREATED="1340145002551" ID="ID_1141072682" MODIFIED="1340145045265" TEXT="put poison constant on the queue in ">
<node CREATED="1340145045267" ID="ID_1492646670" MODIFIED="1340145053496" TEXT="while loop">
<node CREATED="1340145053498" ID="ID_1858328036" MODIFIED="1340145063821" TEXT="swallow any interrupted execptions"/>
<node CREATED="1340145274378" ID="ID_1867434518" MODIFIED="1340145293054" TEXT="break out of infinite while loop if q put is successful"/>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1340147132257" ID="ID_1691807895" MODIFIED="1340147140029" TEXT="one shot services">
<node CREATED="1340147140031" ID="ID_742264358" MODIFIED="1340147147931" TEXT="definition">
<node CREATED="1340147147934" ID="ID_972370812" MODIFIED="1340147178262" TEXT="if a mthod need to process a batch of tasks and does not return until all the tasks are finished it can encapsulate a service in the method"/>
</node>
<node CREATED="1340147184692" ID="ID_1023658765" MODIFIED="1340147194329" TEXT="method">
<node CREATED="1340147194332" ID="ID_1863114514" MODIFIED="1340147208398" TEXT="create the Executor sercice at the start of the mehtod"/>
<node CREATED="1340147209774" ID="ID_87068224" MODIFIED="1340147272403" TEXT="add the all the tasks to the service"/>
<node CREATED="1340147216369" ID="ID_540298252" MODIFIED="1340147228008" TEXT="in the finally block">
<node CREATED="1340147228010" ID="ID_1909667301" MODIFIED="1340147258310" TEXT="executorservice.shutdown"/>
<node CREATED="1340147233264" ID="ID_1890200325" MODIFIED="1340147251715" TEXT="executorservice.awaitTermination"/>
</node>
</node>
<node CREATED="1340147284001" ID="ID_1199431489" MODIFIED="1340147287890" TEXT="considerations">
<node CREATED="1340147300961" ID="ID_1912666288" MODIFIED="1340147305318" TEXT="methods of the service">
<node CREATED="1340147287892" ID="ID_1010413778" MODIFIED="1340147293077" TEXT="invokeAll "/>
<node CREATED="1340147293352" ID="ID_1542232727" MODIFIED="1340147299988" TEXT="invokeAn"/>
</node>
</node>
</node>
<node CREATED="1340144633992" ID="ID_1007053948" MODIFIED="1340147534760" TEXT="simple programs may shutdown an executor service directly"/>
<node CREATED="1340147535808" ID="ID_1735889619" MODIFIED="1340147746008" TEXT="tracking executor ">
<node CREATED="1340147746010" ID="ID_96288668" MODIFIED="1340147763711" TEXT="definition">
<node CREATED="1340147763713" ID="ID_369124400" MODIFIED="1340147771166" TEXT="overcomes the limits of">
<node CREATED="1340147771168" ID="ID_1942617544" MODIFIED="1340147778012" TEXT="executor.shutdownNow"/>
</node>
<node CREATED="1340147780745" ID="ID_394232646" MODIFIED="1340147798961" TEXT="keeps tracks of tasks in progress at shutdown time"/>
</node>
<node CREATED="1340147801061" ID="ID_586911331" MODIFIED="1340147833484" TEXT="considerations">
<node CREATED="1340147833486" ID="ID_1628598042" MODIFIED="1340147854955" TEXT="tasks retain execution status on return">
<node CREATED="1340147856598" ID="ID_1703062066" MODIFIED="1340147864737" TEXT="which wellbehaved tasks should do anyway"/>
</node>
<node CREATED="1340148162263" ID="ID_772613838" MODIFIED="1340148183256" TEXT="has an unavoidable race condiditon that could make it yield false positives">
<node CREATED="1340148593936" ID="ID_500234198" MODIFIED="1340148606510" TEXT="completed tasks identified as cancelled"/>
<node CREATED="1340148606716" ID="ID_106500950" MODIFIED="1340148640339" TEXT="pool can be shutdown between">
<node CREATED="1340148640342" ID="ID_961582241" MODIFIED="1340148666401" TEXT="last instruction of the task"/>
<node CREATED="1340148666991" ID="ID_1437458938" MODIFIED="1340148684791" TEXT="and when the ppol records the task as complete"/>
</node>
<node CREATED="1340148695623" ID="ID_718817568" MODIFIED="1340148709438" TEXT="not a problem if the tasks are idempotent">
<node CREATED="1340148718043" ID="ID_1778327133" MODIFIED="1340148735888" TEXT="otherwise the applcation should be prepareed to deal with false positives"/>
</node>
</node>
</node>
<node CREATED="1340147867202" ID="ID_1563921648" MODIFIED="1340147953319" TEXT="method">
<node CREATED="1340147953321" ID="ID_810968784" MODIFIED="1340148014460" TEXT="each submitted runnable">
<node CREATED="1340147970992" ID="ID_142436528" MODIFIED="1340148022887" TEXT="is wrapped in another runnable">
<node CREATED="1340148024564" ID="ID_1440437079" MODIFIED="1340148039445" TEXT="which run the runable in a try block"/>
<node CREATED="1340148039754" ID="ID_1645169178" MODIFIED="1340148045294" TEXT="and finally">
<node CREATED="1340148045296" ID="ID_910766215" MODIFIED="1340148062650" TEXT="checks ">
<node CREATED="1340148062652" ID="ID_958260674" MODIFIED="1340148070988" TEXT="if the thread is shutdown"/>
<node CREATED="1340148071243" ID="ID_502801963" MODIFIED="1340148097727" TEXT="and the current thread (the task thread) is interrupted"/>
</node>
<node CREATED="1340148100279" ID="ID_36181614" MODIFIED="1340148123056" TEXT="if so it adds the runnable to a list belonging to the service"/>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1340139744573" ID="ID_1308483463" MODIFIED="1340139767911" TEXT="should not attempt to stop worker threads directly"/>
<node CREATED="1340141422144" ID="ID_1266039758" MODIFIED="1340141429403" TEXT="e.g. Logger">
<node CREATED="1340141429406" ID="ID_1988904321" MODIFIED="1340141450311" TEXT="LinkedBlockingQueue ">
<node CREATED="1340141450313" ID="ID_1776861946" MODIFIED="1340141471071" TEXT="takes from q in a loop"/>
<node CREATED="1340141471378" ID="ID_188875792" MODIFIED="1340141478377" TEXT="exits on interrupt">
<node CREATED="1340141478380" ID="ID_573261567" MODIFIED="1340141560238" TEXT="not ideal ">
<node CREATED="1340141560241" ID="ID_317394014" MODIFIED="1340141571382" TEXT="thread exits abuptly">
<node CREATED="1340142730519" ID="ID_938296991" MODIFIED="1340142741724" TEXT="leaves items on the queue"/>
<node CREATED="1340142742969" ID="ID_426508885" MODIFIED="1340142761455" TEXT="blocks threads that are attempting to place items on the queue"/>
</node>
<node CREATED="1340141571953" ID="ID_317711423" MODIFIED="1340141659513" TEXT="better to set a flag">
<node CREATED="1340141659515" ID="ID_773135660" MODIFIED="1340141668863" TEXT="and drain the queue "/>
<node CREATED="1340141669346" ID="ID_387182149" MODIFIED="1340141683683" TEXT="which prevents new items being submitted"/>
<node CREATED="1340141698803" ID="ID_1996096888" MODIFIED="1340141706608" TEXT="though  this approach has race condiditons">
<node CREATED="1340141708302" ID="ID_1725277983" MODIFIED="1340142797009" TEXT="producers ">
<node CREATED="1340142797012" ID="ID_1796673539" MODIFIED="1340142801236" TEXT="check then act">
<node CREATED="1340142801239" ID="ID_1354325226" MODIFIED="1340142824961" TEXT="race condition may mean producers put() on queue aftershutdown">
<node CREATED="1340142825911" ID="ID_1763167160" MODIFIED="1340142841337" TEXT="possibility of getting blocked as consumer may have stopped"/>
</node>
</node>
</node>
<node CREATED="1340143871072" ID="ID_1519307868" MODIFIED="1340143964554" TEXT="better to">
<node CREATED="1340143893032" ID="ID_1793708034" MODIFIED="1340143914926" TEXT="in block synchronised on the thread owner"/>
<node CREATED="1340143964891" ID="ID_291492448" MODIFIED="1340143997727" TEXT="set isShutdown to true"/>
<node CREATED="1340143998312" ID="ID_561009969" MODIFIED="1340144036718" TEXT="throw an exception if is shutdown">
<node CREATED="1340144037876" ID="ID_749647658" MODIFIED="1340144044366" TEXT="otherwise increment counter"/>
</node>
<node CREATED="1340143915219" ID="ID_1687396433" MODIFIED="1340144103141" TEXT="that halts if the system is shutdown and counter is &gt;1">
<node CREATED="1340144106978" ID="ID_276572569" MODIFIED="1340144121324" TEXT="else ">
<node CREATED="1340144121327" ID="ID_955110352" MODIFIED="1340144125649" TEXT="logs"/>
<node CREATED="1340144125887" ID="ID_407614746" MODIFIED="1340144130283" TEXT="decrements the counter"/>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1340148794067" ID="ID_900733158" MODIFIED="1340148812426" TEXT="abnormal thread termination">
<node CREATED="1340148812428" ID="ID_1461041654" MODIFIED="1340148820534" TEXT="definition ">
<node CREATED="1340148843070" ID="ID_318917599" MODIFIED="1340148850373" TEXT="premature thread death">
<node CREATED="1340148850375" ID="ID_652621097" MODIFIED="1340148857007" TEXT="leading cause">
<node CREATED="1340148886043" ID="ID_1918853076" MODIFIED="1340148890965" TEXT="RuntimeException"/>
</node>
</node>
</node>
<node CREATED="1340148861452" ID="ID_62231672" MODIFIED="1340148864998" TEXT="consideartions">
<node CREATED="1340148820536" ID="ID_798827239" MODIFIED="1340148841440" TEXT="failure of thread in concurrent application not obvious"/>
<node CREATED="1340149075791" ID="ID_1495311163" MODIFIED="1340149084532" TEXT="one never knows what a task may throw"/>
<node CREATED="1340149085076" ID="ID_968750858" MODIFIED="1340149096477" TEXT="the less well you know the code the more skeptical one should be"/>
<node CREATED="1340149136883" ID="ID_1927650174" MODIFIED="1340149152487" TEXT="consider catching RuntimeException when calling unknown code"/>
</node>
<node CREATED="1340149234999" ID="ID_806144889" MODIFIED="1340149240181" TEXT="method">
<node CREATED="1340149240183" ID="ID_1672801944" MODIFIED="1340149380645" TEXT="worker thread notifies">
<node CREATED="1340149284694" ID="ID_193761424" MODIFIED="1340149289930" TEXT="while not interrupted"/>
<node CREATED="1340149290308" ID="ID_1736240987" MODIFIED="1340149298719" TEXT="run a task"/>
<node CREATED="1340149299241" ID="ID_1634583018" MODIFIED="1340149315006" TEXT="catch execption and sotre it in a member"/>
<node CREATED="1340149315832" ID="ID_1570407728" MODIFIED="1340149335480" TEXT="finally call thread owner with exception, and this reference to ">
<node CREATED="1340149335482" ID="ID_209055641" MODIFIED="1340149341918" TEXT="signify thread death"/>
</node>
</node>
<node CREATED="1340149367943" ID="ID_988384515" MODIFIED="1340149388009" TEXT="uncaught exception handlers">
<node CREATED="1340149458339" ID="ID_1234929973" MODIFIED="1340149462003" TEXT="definition">
<node CREATED="1340149462005" ID="ID_1007786096" MODIFIED="1340149474928" TEXT="lets you detect when a thread dies due to an uncaught exception"/>
<node CREATED="1340149506738" ID="ID_1974223987" MODIFIED="1340149545914" TEXT="when a thread exits due to an uncaught exception the jvm reports this event to an application-provided UncaughtExceptionHandler ">
<node CREATED="1340149545924" ID="ID_750198798" MODIFIED="1340149575725" TEXT="if no handler exists the defult is to print to the stract trace on System.er"/>
</node>
</node>
<node CREATED="1340149581505" ID="ID_1325972516" MODIFIED="1340149585904" TEXT="method">
<node CREATED="1340149585907" ID="ID_1891680322" MODIFIED="1340149607419" TEXT="since java 5">
<node CREATED="1340149607421" ID="ID_195687837" MODIFIED="1340149628199" TEXT="Thread.setUncaughtExceptionHandler"/>
<node CREATED="1340149628801" ID="ID_1181668124" MODIFIED="1340149684950" TEXT="Thread.setDefaultUncaughtExceptionHandler"/>
<node CREATED="1340149685523" ID="ID_911026550" MODIFIED="1340149700228" TEXT="search">
<node CREATED="1340149701260" ID="ID_169340318" MODIFIED="1340149706549" TEXT="first looks for thread handler"/>
<node CREATED="1340149706873" ID="ID_643351223" MODIFIED="1340149712298" TEXT="then threadgroup handler"/>
<node CREATED="1340149713109" ID="ID_758928998" MODIFIED="1340149721501" TEXT="then thengroup parent handler"/>
<node CREATED="1340149730197" ID="ID_336025803" MODIFIED="1340149761463" TEXT="finally reaching default system handler"/>
</node>
</node>
<node CREATED="1340149865707" ID="ID_1536680652" MODIFIED="1340149888849" TEXT="in long-running application , always use uncaught exception handlers for all threads that at leas log the exception"/>
<node CREATED="1340149898291" ID="ID_260029788" MODIFIED="1340149911976" TEXT="for pooled threads">
<node CREATED="1340149911978" ID="ID_124012594" MODIFIED="1340149918729" TEXT="method">
<node CREATED="1340149918731" ID="ID_1628482163" MODIFIED="1340149955762" TEXT="supply ThreadPoolExecutor&apos;s cpnstructor with">
<node CREATED="1340149955764" ID="ID_1402461434" MODIFIED="1340150013919" TEXT="ThreadPoolFactory">
<node CREATED="1340150058778" ID="ID_675335361" MODIFIED="1340150070703" TEXT="which wraps submitted tasks in another">
<node CREATED="1340150070705" ID="ID_55215547" MODIFIED="1340150076421" TEXT="Runable or Callable"/>
<node CREATED="1340150076899" ID="ID_1235489581" MODIFIED="1340150094780" TEXT="that allows you to catch the runtime exceptions"/>
</node>
</node>
</node>
</node>
<node CREATED="1340150106362" ID="ID_1139180020" MODIFIED="1340150110044" TEXT="considerations">
<node CREATED="1340150111200" ID="ID_179777486" MODIFIED="1340150157048" TEXT="ExecptionHanlder only handles  tasks submitted with ">
<node CREATED="1340150128695" ID="ID_179751936" MODIFIED="1340150134346" TEXT="executre"/>
</node>
<node CREATED="1340150160173" ID="ID_1509911689" MODIFIED="1340150222732" TEXT="Exception handler makes Futrue.get rethrow execption when called if the task is submmited with">
<node CREATED="1340150222742" ID="ID_1990971798" MODIFIED="1340150229734" TEXT="submit"/>
<node CREATED="1340150231107" ID="ID_1585734475" MODIFIED="1340150240689" TEXT="wrapped in ExecutionException"/>
</node>
</node>
</node>
</node>
<node CREATED="1340149762083" ID="ID_1025694526" MODIFIED="1340149768209" TEXT="consideration">
<node CREATED="1340149768211" ID="ID_1536019011" MODIFIED="1340149777066" TEXT="response">
<node CREATED="1340149777068" ID="ID_1371966843" MODIFIED="1340149784386" TEXT="common">
<node CREATED="1340149784389" ID="ID_705744285" MODIFIED="1340149795340" TEXT="print error/stack trace"/>
</node>
<node CREATED="1340149803874" ID="ID_1866810148" MODIFIED="1340149813915" TEXT="less common">
<node CREATED="1340149798582" ID="ID_421087638" MODIFIED="1340149803575" TEXT="try restarteing thrad"/>
<node CREATED="1340149824343" ID="ID_371622533" MODIFIED="1340149830384" TEXT="shutdown application"/>
<node CREATED="1340149830940" ID="ID_1386540561" MODIFIED="1340149837227" TEXT="emailing an operator"/>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1340150258931" ID="ID_832079226" MODIFIED="1340150268401" TEXT="JVM Shutdown">
<node CREATED="1340150268403" ID="ID_961500042" MODIFIED="1340150271018" TEXT="types">
<node CREATED="1340150271021" ID="ID_1980937646" MODIFIED="1340150273700" TEXT="orderly ">
<node CREATED="1340150284116" ID="ID_226119730" MODIFIED="1340150296104" TEXT="definition">
<node CREATED="1340150296106" ID="ID_864493413" MODIFIED="1340150310003" TEXT="last non-daemon thread terminates"/>
<node CREATED="1340150310469" ID="ID_1119490360" MODIFIED="1340150323082" TEXT="someone calls system.exit()"/>
<node CREATED="1340150323921" ID="ID_468558472" MODIFIED="1340150329046" TEXT="platform specific">
<node CREATED="1340150330111" ID="ID_2288200" MODIFIED="1340150333619" TEXT="Ctrl-C"/>
<node CREATED="1340150333821" ID="ID_545091981" MODIFIED="1340150342413" TEXT="SIGINT"/>
</node>
</node>
<node CREATED="1340150476102" ID="ID_597064947" MODIFIED="1340150482100" TEXT="consideration">
<node CREATED="1340150482102" ID="ID_510745279" MODIFIED="1340150632699" TEXT="no guarantees as to running order"/>
<node CREATED="1340150638611" ID="ID_1262859557" MODIFIED="1340150660324" TEXT="will run application threads concurrently if they are not stopped by then">
<node CREATED="1340150725599" ID="ID_1840154601" MODIFIED="1340150744630" TEXT="no attempt is made to stop application threads at shutdown time"/>
</node>
<node CREATED="1340150677573" ID="ID_1628090096" MODIFIED="1340150686728" TEXT="may choose to run finalizers ">
<node CREATED="1340150686730" ID="ID_1538382649" MODIFIED="1340150710320" TEXT="if runFiinalizersOnExit is true"/>
</node>
<node CREATED="1340150758830" ID="ID_1172410405" MODIFIED="1340150784899" TEXT="if shutdown hooks or finalzers don complete, system hangs"/>
</node>
</node>
<node CREATED="1340150273880" ID="ID_1685760399" MODIFIED="1340150282584" TEXT="abru[t">
<node CREATED="1340150348779" FOLDED="true" ID="ID_1650244109" MODIFIED="1340150821611" TEXT="definition">
<node CREATED="1340150353692" ID="ID_568055521" MODIFIED="1340150372648" TEXT="Runtime.halt"/>
<node CREATED="1340150392865" ID="ID_266512721" MODIFIED="1340150398133" TEXT="killing jvm process"/>
</node>
<node CREATED="1340150822898" ID="ID_1565001234" MODIFIED="1340150833112" TEXT="considerations">
<node CREATED="1340150833989" ID="ID_320709596" MODIFIED="1340150860187" TEXT="no required to do anything other than halt the jvm"/>
<node CREATED="1340150871165" ID="ID_1870464647" MODIFIED="1340150876492" TEXT="shutdown hooks dont run"/>
</node>
</node>
</node>
<node CREATED="1340150405842" ID="ID_1437541456" MODIFIED="1340150409031" TEXT="hooks">
<node CREATED="1340150409033" ID="ID_1624041806" MODIFIED="1340150417834" TEXT="definition">
<node CREATED="1340150417836" ID="ID_630007723" MODIFIED="1340150430052" TEXT="on shutdown">
<node CREATED="1340150430054" ID="ID_1465888674" MODIFIED="1340150438134" TEXT="starts all registered hooks"/>
<node CREATED="1340150450087" ID="ID_1610524962" MODIFIED="1340150454665" TEXT="seperate threads"/>
<node CREATED="1340150455804" ID="ID_1528814957" MODIFIED="1340150462367" TEXT="registered with">
<node CREATED="1340150462369" ID="ID_404231438" MODIFIED="1340150469618" TEXT="Runtime.addShutdownHook"/>
</node>
</node>
</node>
<node CREATED="1340150893619" ID="ID_523312754" MODIFIED="1340150899904" TEXT="considerations">
<node CREATED="1340150899906" ID="ID_1672211202" MODIFIED="1340150909197" TEXT="must be ">
<node CREATED="1340150909199" ID="ID_856813164" MODIFIED="1340150912042" TEXT="thread safe"/>
<node CREATED="1340150912351" ID="ID_1570843851" MODIFIED="1340150921060" TEXT="careful to avoid deadlock"/>
<node CREATED="1340150921894" ID="ID_1457422652" MODIFIED="1340150952648" TEXT="synchronised where accessing shared data"/>
<node CREATED="1340150953180" ID="ID_1149430744" MODIFIED="1340150964301" TEXT="careful not to make assumptions on the state of the code"/>
<node CREATED="1340150974232" ID="ID_1468679098" MODIFIED="1340150988334" TEXT="coded defensiviley"/>
<node CREATED="1340151000833" ID="ID_1125649697" MODIFIED="1340151011500" TEXT="coded to exit as quickly as possible"/>
<node CREATED="1340151126411" ID="ID_1254890511" MODIFIED="1340151166475" TEXT="non dependent on services that may be cleaned or closed down by other shutdown hooks">
<node CREATED="1340151175842" ID="ID_31837621" MODIFIED="1340151183223" TEXT="one shutdownhook for all processes">
<node CREATED="1340151228320" ID="ID_507506142" MODIFIED="1340151245841" TEXT="can also ensure things are done in the right order"/>
<node CREATED="1340151254268" ID="ID_1349132746" MODIFIED="1340151261696" TEXT="avoids race conditions with other hooks"/>
</node>
</node>
</node>
</node>
<node CREATED="1340151023972" ID="ID_1487476946" MODIFIED="1340151030324" TEXT="use">
<node CREATED="1340151030326" ID="ID_989588882" MODIFIED="1340151033708" TEXT="cleanup">
<node CREATED="1340151033710" ID="ID_1964519729" MODIFIED="1340151035782" TEXT="services">
<node CREATED="1340151077258" ID="ID_143416080" MODIFIED="1340151095369" TEXT="e.g. stop service in hook">
<node CREATED="1340151095371" ID="ID_1425207397" MODIFIED="1340151105218" TEXT="execption caught and swallowed"/>
</node>
</node>
<node CREATED="1340151036237" ID="ID_1967644756" MODIFIED="1340151039195" TEXT="application"/>
</node>
</node>
</node>
</node>
<node CREATED="1340151275403" ID="ID_782669717" MODIFIED="1340151285203" TEXT="Daemon Threads">
<node CREATED="1340151285205" ID="ID_536696936" MODIFIED="1340151293271" TEXT="defintion">
<node CREATED="1340151293273" ID="ID_663967522" MODIFIED="1340151308798" TEXT="background thread that doesnt stop the JVM from shutting down"/>
</node>
<node CREATED="1340151317463" ID="ID_1877009955" MODIFIED="1340151320891" TEXT="considerations">
<node CREATED="1340151320893" ID="ID_1406333356" MODIFIED="1340151337753" TEXT="all JVM internal threads are daemon threads">
<node CREATED="1340151338004" ID="ID_1056201866" MODIFIED="1340151343651" TEXT="except">
<node CREATED="1340151343653" ID="ID_1231505577" MODIFIED="1340151346440" TEXT="main thread"/>
</node>
</node>
<node CREATED="1340151362147" ID="ID_736613464" MODIFIED="1340151374288" TEXT="all threads inherit the daemon status from the threads parent">
<node CREATED="1340151375798" ID="ID_457957011" MODIFIED="1340151391060" TEXT="since most threads are created in main they inhiert nondaemon status"/>
</node>
<node CREATED="1340151408403" ID="ID_982845876" MODIFIED="1340151429810" TEXT="when a JVM halts any remaining daemon threads are abandoned">
<node CREATED="1340151436540" ID="ID_1587937821" MODIFIED="1340151442512" TEXT="finally blocks not executed"/>
<node CREATED="1340151442848" ID="ID_1568533533" MODIFIED="1340151449086" TEXT="stacks not unwound"/>
<node CREATED="1340151449431" ID="ID_696830314" MODIFIED="1340151457005" TEXT="JVM just exits"/>
</node>
<node CREATED="1340151469520" ID="ID_1352077228" MODIFIED="1340151475970" TEXT="use sparilingl">
<node CREATED="1340151475972" ID="ID_633453965" MODIFIED="1340151487338" TEXT="most threads cannot be aboneded as daemons are"/>
<node CREATED="1340151496085" ID="ID_1410624793" MODIFIED="1340151508160" TEXT="NOT to be used for any IO"/>
<node CREATED="1340151508961" ID="ID_844485523" MODIFIED="1340151531295" TEXT="best for housekeeping tasks"/>
</node>
<node CREATED="1340151532154" ID="ID_234665715" MODIFIED="1340151556556" TEXT="not good subsittute for properly managing the lifecycle of services within an appl;ication"/>
</node>
</node>
<node CREATED="1340151568973" ID="ID_999757552" MODIFIED="1340151583457" TEXT="Finalizers">
<node CREATED="1340151584810" ID="ID_304405484" MODIFIED="1340151597958" TEXT="definition">
<node CREATED="1340151597960" ID="ID_1511045290" MODIFIED="1340151624848" TEXT="jvm treats objects that have a finalize method specially"/>
<node CREATED="1340151625414" ID="ID_1169365367" MODIFIED="1340151664708" TEXT="file or socket handles sometimes need explicit return outside of jvm GC"/>
<node CREATED="1340151674910" ID="ID_1621849908" MODIFIED="1340151689755" TEXT="finalize called so persistant resources can be released"/>
</node>
<node CREATED="1340151845871" ID="ID_322375691" MODIFIED="1340151850302" TEXT="considerations">
<node CREATED="1340151850304" ID="ID_1121667519" MODIFIED="1340151912269" TEXT="since finalizers can run in any of the JVMs threads, any application state can be accessed by multiple threads">
<node CREATED="1340151918740" ID="ID_1090878952" MODIFIED="1340151924345" TEXT="need synchronisation"/>
</node>
<node CREATED="1340151932321" ID="ID_790299811" MODIFIED="1340151940414" TEXT="no guarantees when or if they run"/>
<node CREATED="1340151948286" ID="ID_1681496784" MODIFIED="1340151959341" TEXT="can impose big performance costs"/>
<node CREATED="1340151959900" ID="ID_1666687804" MODIFIED="1340151966692" TEXT="difficult to right correctly"/>
<node CREATED="1340151972707" ID="ID_211835519" MODIFIED="1340151984420" TEXT="better to use explicit ">
<node CREATED="1340151984422" ID="ID_1852429126" MODIFIED="1340151993553" TEXT="close() in finally blocks"/>
<node CREATED="1340152006852" ID="ID_749549948" MODIFIED="1340152037514" TEXT="except where you need to manage resources aquired by native methods"/>
</node>
<node CREATED="1340152041119" ID="ID_1407721058" MODIFIED="1340152046355" TEXT="avoid finalisers"/>
</node>
</node>
</node>
<node CREATED="1339483091853" ID="ID_1854696544" MODIFIED="1340148774764" POSITION="right" TEXT="cancellable">
<node CREATED="1339483108829" ID="ID_1777178431" MODIFIED="1340148782811" TEXT="definition">
<node CREATED="1339483113833" ID="ID_788187687" MODIFIED="1339483144923" TEXT="external code can move it to completion earlier than normal"/>
</node>
<node CREATED="1339483151288" ID="ID_1359322636" MODIFIED="1340148781824" TEXT="types">
<node CREATED="1339482923661" ID="ID_1313071201" MODIFIED="1340148785028" TEXT="prememptive">
<node CREATED="1339482930157" ID="ID_370456892" MODIFIED="1339482936311" TEXT="no safe way"/>
</node>
<node CREATED="1339482586487" ID="ID_1023939295" MODIFIED="1340148786361" TEXT="cooperative">
<node CREATED="1339482592328" FOLDED="true" ID="ID_61949276" MODIFIED="1340122562530" TEXT="bevause">
<node CREATED="1339482596649" ID="ID_71370284" MODIFIED="1339482615243" TEXT="we rearely want a task thread or service to stop immediately"/>
</node>
<node CREATED="1339483014988" FOLDED="true" ID="ID_184657631" MODIFIED="1340122562679" TEXT="mechanisms">
<node CREATED="1339530280158" FOLDED="true" ID="ID_1833320306" MODIFIED="1340122562539" TEXT="flag">
<node CREATED="1339483388545" FOLDED="true" ID="ID_1165213325" MODIFIED="1340122562536" TEXT="characteristics">
<node CREATED="1339483060666" ID="ID_1895258853" MODIFIED="1339483090569" TEXT="if the thread finds that the tasks is set it terminates early"/>
<node CREATED="1339483424331" ID="ID_711590344" MODIFIED="1339483430019" TEXT="is volatile"/>
<node CREATED="1339483440186" FOLDED="true" ID="ID_182346647" MODIFIED="1340122562533" TEXT="is set via ">
<node CREATED="1339483530762" FOLDED="true" ID="ID_878328572" MODIFIED="1340122562532" TEXT="the cancel method">
<node CREATED="1339483535328" ID="ID_1039598485" MODIFIED="1339483550959" TEXT="called in a finally block if used to shut down the process"/>
<node CREATED="1339483551607" ID="ID_21289184" MODIFIED="1339483576068" TEXT="in case interrupted exception is thrown"/>
</node>
</node>
</node>
<node CREATED="1339530334657" FOLDED="true" ID="ID_237414870" MODIFIED="1340122562537" TEXT="considerations">
<node CREATED="1339530353269" ID="ID_1137422435" MODIFIED="1339530376354" TEXT="the task may never check flag if the thread is engaged in a blocking call"/>
</node>
</node>
<node CREATED="1339542283960" FOLDED="true" ID="ID_1624974633" MODIFIED="1340122562554" TEXT="future">
<node CREATED="1339542288987" FOLDED="true" ID="ID_1330267339" MODIFIED="1340122562543" TEXT="definition">
<node CREATED="1339542307401" FOLDED="true" ID="ID_1006783552" MODIFIED="1340122562542" TEXT="manages the task">
<node CREATED="1339542315932" FOLDED="true" ID="ID_756386077" MODIFIED="1340122562541" TEXT="lifecycle">
<node CREATED="1339542322322" ID="ID_689780792" MODIFIED="1339542325870" TEXT="exceptions"/>
<node CREATED="1339542326647" ID="ID_1066874106" MODIFIED="1339542340213" TEXT="facilitatin cancellations"/>
</node>
</node>
</node>
<node CREATED="1339542342375" FOLDED="true" ID="ID_1425052792" MODIFIED="1340122562550" TEXT="method">
<node CREATED="1339542354308" FOLDED="true" ID="ID_1737496342" MODIFIED="1340122562549" TEXT="submit task to the ">
<node CREATED="1339542402252" FOLDED="true" ID="ID_1186240360" MODIFIED="1340122562548" TEXT="ExecutorService.submit()">
<node CREATED="1339542544857" FOLDED="true" ID="ID_1020462208" MODIFIED="1340122562547" TEXT="considerations">
<node CREATED="1339542556633" FOLDED="true" ID="ID_171123894" MODIFIED="1340122562546" TEXT="on set mayInterruptIfRunning on ">
<node CREATED="1339543020699" FOLDED="true" ID="ID_1189137602" MODIFIED="1340122562544" TEXT="standard Executors">
<node CREATED="1339543026298" ID="ID_515686444" MODIFIED="1339543082153" TEXT="they implement a interuption policy which lets tasks be cancelled while running"/>
<node CREATED="1339543086605" ID="ID_871214735" MODIFIED="1339543120116" TEXT="so safe to set mayInterrrupt when running if in a standard Executor"/>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1339543152664" ID="ID_1133074892" MODIFIED="1339543167273" TEXT="call cancell() on the returned Future"/>
</node>
<node CREATED="1339543189950" FOLDED="true" ID="ID_264985132" MODIFIED="1340122562552" TEXT="considerations">
<node CREATED="1339543197838" FOLDED="true" ID="ID_1065727360" MODIFIED="1340122562551" TEXT="do no interrupt a pool thread when trying to cancel a task">
<node CREATED="1339543225048" ID="ID_1495608154" MODIFIED="1339543247535" TEXT="one does not know what task is running when the thread is interrupted"/>
</node>
</node>
</node>
<node CREATED="1339530166597" FOLDED="true" ID="ID_122455810" MODIFIED="1340122562652" TEXT="interupprion">
<node CREATED="1339530434707" FOLDED="true" ID="ID_1806167277" MODIFIED="1340122562555" TEXT="definition">
<node CREATED="1339530440727" ID="ID_1417948029" MODIFIED="1339530493947" TEXT="thread signals to another thread that it should at its convenience and if it feels like it stop what its doing and do something else"/>
</node>
<node CREATED="1339530505634" FOLDED="true" ID="ID_830959292" MODIFIED="1340122562556" TEXT="considerations">
<node CREATED="1339530510329" ID="ID_648873202" MODIFIED="1339530560244" TEXT="theres is nothing in tha API or language specification that ties interruption to any specific cancellation semantics but in practise using interuption for anything but cancellation is fragile and difficult to sustain in larger applications"/>
</node>
<node CREATED="1339530682735" FOLDED="true" ID="ID_235639735" MODIFIED="1340122562570" TEXT="methods">
<node CREATED="1339530700208" FOLDED="true" ID="ID_474073166" MODIFIED="1340122562561" TEXT="isInterupted()">
<node CREATED="1339530717651" FOLDED="true" ID="ID_1620643194" MODIFIED="1340122562559" TEXT="returns threads">
<node CREATED="1339530576122" FOLDED="true" ID="ID_1526179917" MODIFIED="1340122562558" TEXT="interrupted status">
<node CREATED="1339530569170" ID="ID_1184574816" MODIFIED="1339530576120" TEXT="each thread has a boolean "/>
<node CREATED="1339530588697" ID="ID_196613985" MODIFIED="1339530666338" TEXT="set to true when thread is interrupted"/>
</node>
</node>
</node>
<node CREATED="1339530752372" FOLDED="true" ID="ID_1220752592" MODIFIED="1340122562569" TEXT="Thread.interuppted()">
<node CREATED="1339530776834" FOLDED="true" ID="ID_552113210" MODIFIED="1340122562563" TEXT="definition">
<node CREATED="1339530795281" ID="ID_368295328" MODIFIED="1339530864122" TEXT="clears the interrupted status"/>
<node CREATED="1339530864497" ID="ID_1925179983" MODIFIED="1339530870235" TEXT="returns its previous value"/>
</node>
<node CREATED="1339532300853" FOLDED="true" ID="ID_1488232237" MODIFIED="1340122562567" TEXT="considerations">
<node CREATED="1339532304739" FOLDED="true" ID="ID_655648225" MODIFIED="1340122562565" TEXT="if called and returns true you should ">
<node CREATED="1339532316270" ID="ID_1729890716" MODIFIED="1339532334227" TEXT="throw InterruptedException"/>
<node CREATED="1339532336304" ID="ID_129239875" MODIFIED="1339532364024" TEXT="or restore interruptedstatus"/>
</node>
</node>
</node>
</node>
<node CREATED="1339530889087" FOLDED="true" ID="ID_329207650" MODIFIED="1340122562584" TEXT="exceotions">
<node CREATED="1339530909230" FOLDED="true" ID="ID_455312237" MODIFIED="1340122562583" TEXT="InteruptedException">
<node CREATED="1339531135266" FOLDED="true" ID="ID_1333969844" MODIFIED="1340122562577" TEXT="definition">
<node CREATED="1339531172216" FOLDED="true" ID="ID_1867431035" MODIFIED="1340122562576" TEXT="to indicate early completion due to an interrupt by a ">
<node CREATED="1339531317340" FOLDED="true" ID="ID_149941180" MODIFIED="1340122562575" TEXT="blocking operation">
<node CREATED="1339531337420" FOLDED="true" ID="ID_1240710597" MODIFIED="1340122562572" TEXT="e.g.">
<node CREATED="1339531344031" ID="ID_103631559" MODIFIED="1339531351334" TEXT="Thread.sleep()"/>
<node CREATED="1339531351878" ID="ID_684177057" MODIFIED="1339531360357" TEXT="Object.wait()"/>
<node CREATED="1339532196945" ID="ID_1961837732" MODIFIED="1339532199627" TEXT="join()"/>
</node>
<node CREATED="1339531389517" FOLDED="true" ID="ID_1376285432" MODIFIED="1340122562574" TEXT="considerations">
<node CREATED="1339531395739" ID="ID_197776488" MODIFIED="1339531424980" TEXT="jvm makes no guarantees how quickly the operation will notice"/>
<node CREATED="1339531425556" ID="ID_238292402" MODIFIED="1339531433524" TEXT="in practise it happens quite quickly"/>
<node CREATED="1339532236032" ID="ID_413270287" MODIFIED="1339532260636" TEXT="may ignore the request as long as the status remains so that calling code can query"/>
</node>
</node>
</node>
</node>
<node CREATED="1339532100162" FOLDED="true" ID="ID_1095724109" MODIFIED="1340122562580" TEXT="method">
<node CREATED="1339532105129" FOLDED="true" ID="ID_664648077" MODIFIED="1340122562579" TEXT="thread.interrupt()">
<node CREATED="1339532124579" FOLDED="true" ID="ID_106376624" MODIFIED="1340122562578" TEXT="consideations ">
<node CREATED="1339532129330" ID="ID_802862014" MODIFIED="1339532172827" TEXT="doesnt necessarally stop the target thread from working, it merely delivers the message that interruption is requested"/>
</node>
</node>
</node>
<node CREATED="1339532368376" FOLDED="true" ID="ID_566397824" MODIFIED="1340122562581" TEXT="considerations">
<node CREATED="1339532372860" ID="ID_292500991" MODIFIED="1339532384245" TEXT="usually the most sensible way to implement cancellation"/>
</node>
</node>
</node>
<node CREATED="1339532454338" FOLDED="true" ID="ID_1484561895" MODIFIED="1340122562649" TEXT="requires">
<node CREATED="1339532463955" FOLDED="true" ID="ID_37380295" MODIFIED="1340122562648" TEXT="interruption policy">
<node CREATED="1339532510197" FOLDED="true" ID="ID_1058892743" MODIFIED="1340122562585" TEXT="definition">
<node CREATED="1339532513280" ID="ID_711611144" MODIFIED="1339532546721" TEXT="determines how a thread interprets an interruption request"/>
<node CREATED="1339532557490" ID="ID_541514240" MODIFIED="1339532571333" TEXT="what it should do when it recieves an interruption request"/>
<node CREATED="1339532575576" ID="ID_1983415369" MODIFIED="1339532586236" TEXT="how quickly thread reacts to interruption"/>
</node>
<node CREATED="1339532634377" FOLDED="true" ID="ID_1836780513" MODIFIED="1340122562646" TEXT="considerations">
<node CREATED="1339532865989" FOLDED="true" ID="ID_1062330816" MODIFIED="1340122562591" TEXT="tasks should preserve interupt status for code that has thread">
<node CREATED="1339532979527" FOLDED="true" ID="ID_1769610994" MODIFIED="1340122562590" TEXT="ownership ">
<node CREATED="1339533043789" FOLDED="true" ID="ID_464598402" MODIFIED="1340122562586" TEXT="definition">
<node CREATED="1339533072522" ID="ID_1258080020" MODIFIED="1339533084294" TEXT="code that creates threads owns threads"/>
</node>
<node CREATED="1339533063216" FOLDED="true" ID="ID_837329084" MODIFIED="1340122562589" TEXT="considerations">
<node CREATED="1339532640602" FOLDED="true" ID="ID_1002920839" MODIFIED="1340122562588" TEXT="distinguish interpreation of interruption between ">
<node CREATED="1339532647532" FOLDED="true" ID="ID_1452725182" MODIFIED="1340122557164" TEXT="threads">
<node CREATED="1339532845414" ID="ID_1093474392" MODIFIED="1339532856846" TEXT="borrowed by task"/>
<node CREATED="1339532857067" ID="ID_1715432925" MODIFIED="1339532861955" TEXT="owned by thread pool"/>
</node>
<node CREATED="1339532666256" FOLDED="true" ID="ID_616405823" MODIFIED="1340122557165" TEXT="task ">
<node CREATED="1339532828732" ID="ID_121589546" MODIFIED="1339532843099" TEXT="doesn own thread"/>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1339533089008" ID="ID_1648263445" MODIFIED="1339533114487" TEXT="owning code may wish to act on interrupted status"/>
<node CREATED="1339533145615" FOLDED="true" ID="ID_918837377" MODIFIED="1340122562592" TEXT="this is why most blocking library calls simply thorw interrupted exeption in response to an interrupt">
<node CREATED="1339533197387" ID="ID_1124658288" MODIFIED="1339533240245" TEXT="they will never execute in threads that they own"/>
<node CREATED="1339533240652" ID="ID_949612121" MODIFIED="1339533255096" TEXT="so most sensible just to get out of the way and communicate the interrupt"/>
</node>
<node CREATED="1339533283472" ID="ID_1637611133" MODIFIED="1339533356863" TEXT="a task should not assume anythng about the interupion policy of its executing thread unless it has explcitly documented in an interruption policy"/>
<node CREATED="1339533392807" FOLDED="true" ID="ID_99096487" MODIFIED="1340122562603" TEXT="if a task doesnt throw InterruptedException in response to an interrupt it should restore the interrupted exception">
<node CREATED="1339533432791" ID="ID_719230891" MODIFIED="1339533446050" TEXT="Thread,currentThread().interrupt()"/>
</node>
<node CREATED="1339533473674" ID="ID_87287740" MODIFIED="1339533983235" TEXT="never swallow an interruption exception unless implementing that threads interruption policy in owning code"/>
<node CREATED="1339539675567" FOLDED="true" ID="ID_47548068" MODIFIED="1340122562642" TEXT="timed interruptions/timeouts">
<node CREATED="1339539506704" FOLDED="true" ID="ID_522176119" MODIFIED="1340122562616" TEXT="never schedule an interupt from a calling thread">
<node CREATED="1339539518974" ID="ID_1190893992" MODIFIED="1339539530886" TEXT="doesnt know called threads interruption polciy"/>
<node CREATED="1339539531375" ID="ID_527719281" MODIFIED="1339539580352" TEXT="thread may return before interrupt goes off and interrupt another thread"/>
<node CREATED="1339539580873" ID="ID_61093209" MODIFIED="1339539621019" TEXT="also if the trask is not responsive to interruption may still wait for a long time"/>
</node>
<node CREATED="1339541689340" FOLDED="true" ID="ID_988548487" MODIFIED="1340122562621" TEXT="instead">
<node CREATED="1339539687195" ID="ID_190384306" MODIFIED="1339541768776" TEXT="perform a timed join and after join returns"/>
<node CREATED="1339541712706" ID="ID_548031245" MODIFIED="1339541759803" TEXT="schedule a the worker thread to run with a timeout"/>
<node CREATED="1339539959702" FOLDED="true" ID="ID_564695044" MODIFIED="1340122562619" TEXT="save and rethrow exception if an exception was thrown in task">
<node CREATED="1339539980499" FOLDED="true" ID="ID_712560172" MODIFIED="1340122562617" TEXT="saved throwable is made volatile">
<node CREATED="1339539996035" ID="ID_1766656568" MODIFIED="1339540000632" TEXT="for safe publication"/>
</node>
</node>
</node>
<node CREATED="1339542013924" FOLDED="true" ID="ID_1713002393" MODIFIED="1340122562640" TEXT="or instead ">
<node CREATED="1339542020937" ID="ID_1105319384" MODIFIED="1339542037865" TEXT="submit the task to an executor and return a future"/>
<node CREATED="1339543303775" ID="ID_291099196" MODIFIED="1339543324788" TEXT="issue a time future.get()"/>
<node CREATED="1339543346140" FOLDED="true" ID="ID_1248695953" MODIFIED="1340122562638" TEXT="if get it terminated with a TimeoutException cancel the future">
<node CREATED="1339543441758" ID="ID_1713133967" MODIFIED="1339543450309" TEXT="this occurs in the finally clause"/>
<node CREATED="1339543466730" FOLDED="true" ID="ID_292238946" MODIFIED="1340122562623" TEXT="when Future get throws IntteruptedException or timeoutEception you know the result in no longer needed">
<node CREATED="1339543490450" ID="ID_788173577" MODIFIED="1339543517792" TEXT="we can rethrow the cause of ExecutionException"/>
<node CREATED="1339543518215" FOLDED="true" ID="ID_1092547501" MODIFIED="1340122557171" TEXT="cancel in the finally clause will ensure the future is still thrown">
<node CREATED="1339543563553" ID="ID_1571519489" MODIFIED="1339543582416" TEXT="if the future is completed calling cancel does no harm"/>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1339543660980" FOLDED="true" ID="ID_263360712" MODIFIED="1340122562677" TEXT="non-interruptable blocking">
<node CREATED="1339543692455" FOLDED="true" ID="ID_55579388" MODIFIED="1340122562653" TEXT="definition">
<node CREATED="1339543695927" ID="ID_1470469750" MODIFIED="1339543725953" TEXT="we cab sometimes concice threads blocked in noninterruptible activieties to sop via means similar to interruption"/>
</node>
<node CREATED="1339543743899" FOLDED="true" ID="ID_1800562740" MODIFIED="1340122562675" TEXT="mechanisms">
<node CREATED="1339543751172" FOLDED="true" ID="ID_919718132" MODIFIED="1340122562658" TEXT="Synchronous socket in java.io">
<node CREATED="1339543772956" FOLDED="true" ID="ID_622316586" MODIFIED="1340122562655" TEXT="blocking read and write notsensitve to blocking in">
<node CREATED="1339543820895" ID="ID_1937946237" MODIFIED="1339543824725" TEXT="InputStream"/>
<node CREATED="1339543824954" ID="ID_1900978101" MODIFIED="1339543828428" TEXT="OutputStream"/>
</node>
<node CREATED="1339543855276" FOLDED="true" ID="ID_435914226" MODIFIED="1340122562656" TEXT="but closing underlying socket makes any blocked threads throw">
<node CREATED="1339543872151" ID="ID_1799008140" MODIFIED="1339543879659" TEXT="SocketException"/>
</node>
</node>
<node CREATED="1339543833847" FOLDED="true" ID="ID_1654250053" MODIFIED="1340122562665" TEXT="Synchronous io in java.nio">
<node CREATED="1339543895699" FOLDED="true" ID="ID_1994155261" MODIFIED="1340122562661" TEXT="interrupting a thread waiting on an InterruptibleChannel ">
<node CREATED="1339543915353" FOLDED="true" ID="ID_1420371283" MODIFIED="1340122562660" TEXT="throws">
<node CREATED="1339543920843" ID="ID_715080685" MODIFIED="1339543938202" TEXT="ClosedByInterruptExecption"/>
</node>
</node>
<node CREATED="1339543946845" FOLDED="true" ID="ID_874587698" MODIFIED="1340122562663" TEXT="closing a channel causes threads blocked on channel to throw">
<node CREATED="1339543965364" ID="ID_1321821820" MODIFIED="1339543976003" TEXT="AsynchrnousCloseException"/>
</node>
</node>
<node CREATED="1339543997096" FOLDED="true" ID="ID_1607303786" MODIFIED="1340122562669" TEXT="Asynchronous IO with Selector">
<node CREATED="1339544016274" FOLDED="true" ID="ID_73841067" MODIFIED="1340122562667" TEXT="if thread is blocked in Selector.select (in java.nio.channels)">
<node CREATED="1339544039280" FOLDED="true" ID="ID_679028786" MODIFIED="1340122562666" TEXT="call close() or wakeup()">
<node CREATED="1339544050621" ID="ID_3046715" MODIFIED="1339544057767" TEXT="causes thread to return early"/>
</node>
</node>
</node>
<node CREATED="1339544059664" FOLDED="true" ID="ID_771078354" MODIFIED="1340122562673" TEXT="Lock Aquisition">
<node CREATED="1339544065912" FOLDED="true" ID="ID_271929871" MODIFIED="1340122562672" TEXT="if thread is blocked waiting for a lock">
<node CREATED="1339544079570" ID="ID_1462617830" MODIFIED="1339544099665" TEXT="nothing you can do short of ensuringthat the lock is eventually aquired"/>
<node CREATED="1339544100059" FOLDED="true" ID="ID_1907482737" MODIFIED="1340122562670" TEXT="explicit lock classes offer the lockInterruptibly method">
<node CREATED="1339544126625" ID="ID_664750470" MODIFIED="1339544147172" TEXT="which allows you to aquire a lock while remaining sensitive to intterrupts"/>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
<node CREATED="1339483195422" ID="ID_821429476" MODIFIED="1340148787792" TEXT="requires">
<node CREATED="1339483199412" FOLDED="true" ID="ID_352736938" MODIFIED="1340122562696" TEXT="cancellatin poliicy">
<node CREATED="1339483209063" FOLDED="true" ID="ID_941890658" MODIFIED="1340122562689" TEXT="definition ">
<node CREATED="1339483214666" FOLDED="true" ID="ID_1408679697" MODIFIED="1340122562688" TEXT="specifies">
<node CREATED="1339483232252" FOLDED="true" ID="ID_1942811206" MODIFIED="1340122562684" TEXT="how">
<node CREATED="1339483241429" ID="ID_1132584449" MODIFIED="1339483261763" TEXT="how code can request cancellation"/>
</node>
<node CREATED="1339483235198" FOLDED="true" ID="ID_1177895585" MODIFIED="1340122562686" TEXT="when">
<node CREATED="1339483263865" ID="ID_1239957768" MODIFIED="1339483286268" TEXT="the task checks whether cancellation has been requested"/>
</node>
<node CREATED="1339483236924" FOLDED="true" ID="ID_986431168" MODIFIED="1340122562687" TEXT="what">
<node CREATED="1339483296815" ID="ID_850701644" MODIFIED="1339483335358" TEXT="actions the task takes in response to a cacnellation request"/>
</node>
</node>
</node>
<node CREATED="1339533547530" FOLDED="true" ID="ID_640930660" MODIFIED="1340122562695" TEXT="considerations">
<node CREATED="1339533556881" ID="ID_22449240" MODIFIED="1339533610896" TEXT="tasks should not make assumptions about the interruption poilicies "/>
<node CREATED="1339533630243" ID="ID_134236139" MODIFIED="1339533658268" TEXT="cancellation code should not interrupt threads it doesnt own"/>
<node CREATED="1339534051794" FOLDED="true" ID="ID_195245870" MODIFIED="1340122562694" TEXT="activities that do not support cancellation">
<node CREATED="1339534061964" ID="ID_656426784" MODIFIED="1339534087869" TEXT="should call blocking calls in a loop"/>
<node CREATED="1339534088234" FOLDED="true" ID="ID_1397282718" MODIFIED="1340122562692" TEXT="when intteruption is detected">
<node CREATED="1339534101442" ID="ID_1085764725" MODIFIED="1339534106677" TEXT="should retry "/>
<node CREATED="1339534107497" FOLDED="true" ID="ID_1207519815" MODIFIED="1340122562691" TEXT="but preserve the interrupted status and restore it just before returning">
<node CREATED="1339534612120" ID="ID_1759268281" MODIFIED="1339534647840" TEXT="dont have to use interuption status to preserve interruption status"/>
<node CREATED="1339534652500" FOLDED="true" ID="ID_634736660" MODIFIED="1340122562690" TEXT="can use flags /other variables to presever state">
<node CREATED="1339534687468" ID="ID_1063009841" MODIFIED="1339534694433" TEXT="be sure to synchronise adequately"/>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
</node>
</map>
